<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>THE GREEN APP</title>
  <link rel="stylesheet" href="/assets/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="/assets/css/styles.css">
  <link rel="stylesheet" href="/assets/css/font-awesome.min.css">

</head>

<body>

  <!--  Navbar -->
  <div id="navbar-wrapper">
    <nav id="navbar" class="navbar navbar-default navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <!-- Sidebar button -->
          <button id="navbar-button-sidemenu" type="button" class="toggle-nav navbar-toggle" data-toggle="collapse">
            <span class="glyphicon glyphicon-list"></span>
          </button>

          <!-- Settings button -->
          <button id="navbar-button-settings" type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-settings">
            <span class="glyphicon glyphicon-option-vertical"></span>
          </button>

          <!-- App Name -->

          <p id="navbar-brand" class="navbar-text"><img id="group-logo" class="navbar-logo" src="/assets/logo.png" >Green</p>
        </div>

        <!-- Navbar options -->
        <div class="collapse navbar-collapse" id="navbar-settings">
          <ul class="nav navbar-nav navbar-right">
            <li>
              <!-- Trigger the modal with a button -->
              <button type="button" class="btn btn-info" data-toggle="modal" data-target="#new-group">Add Group <span class="glyphicon glyphicon-plus"></span> </button>
            </li>
            <li>
             <div class="dropdown">
              <button id="groups-dropdown" class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Groups
                <span class="caret"></span></button>
                <ul class="dropdown-menu">
                  {{#each groups}}
                  <li><a href="/user/{{ ../UserName }}/{{ this.TeamURL }}"> {{ this.TeamName }} </a></li>
                  {{/each}}
                </ul>
              </div>
            </li>
            <li>
              <a href="/user/{{ UserName }}/account-settings" >
                <span class="glyphicon glyphicon-user"></span>
                {{ UserName }}
              </a>
            </li>
            <li><a href="/"><span class="glyphicon glyphicon-log-out"></span> Log out</a></li>
          </ul>
        </div>
      </div>
    </nav>

  </div>
  <!--  Navbar end-->

  <div id="site-wrapper">

    <div id="site-canvas">

      <div id="sidebar-wrapper">
        <h1 id="team-name">{{ groupData.TeamName }} </h1>
        <p id="team-description">{{ groupData.TeamDescription }}</p>
        <h2 id="team-members">Team Members</h2>
        <ul class="sidebar-nav">
          {{#each groupData.Members}}
          <li>{{ this.membername }}</li>
          {{/each}}
        </ul>
      </div>

      <div id="main-content">
        <!-- MAIN CONTENT GOES HERE -->
            <div id="make-post-bar">
              <h3> Bulletin </h3>
            <p id="date"></p>
              <input type="text" id="post-text" class="form-control" placeholder="What's up?">
              <button onClick="addPost('{{ UserName }}')" id="post-btn" type="button" class="btn">Post</button>
              <div id="urgent-btn">
               
                    <input type="checkbox"> Urgent? Group members will receive special notification

              </div>

            </div>
            <div id="card-stack">
                <div class="card">
                  <h4>Welcome</h4>
                  <p>Welcome to the Green app! Let's get started. You can make posts, change groups, and mark posts as urgent. When you mark your post as urgent your group members will receive a special notification that they need to pay attention to your post. </p>
                </div>
            </div>
     
      </div>

    </div>
    <!-- Modal -->
    <div class="modal fade" id="new-group" role="dialog">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">New Group</h4>
          </div>
          <div class="modal-body">
            <form>
              <div class="form-group">
                <ul>
                  <li class="col-xs-2" ><input id="group-name" type="text" class="form-control" placeholder="Group Name"></li>
                  <li><textarea id="group-description" class="form-control" rows="3" placeholder="Description" required></textarea></li>
                </ul>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            <button onClick="addGroup('{{ UserName }}')" type="button" class="btn btn-default" data-dismiss="modal">Submit</button>
          </div>
        </div>
      </div>
    </div>

  </div>

  <script src="/assets/js/jquery.min.js"></script>
  <script src="/assets/bootstrap/js/bootstrap.min.js"></script>
  <script src="/assets/js/sidemenu.js"></script>
  <script type="application/javascript" src="/assets/js/fastclick.js"></script>

  <script>
  window.addEventListener('load', function() {
    new FastClick(document.body);
  }, false);
  
  function addGroup(UserName){
    var groupName = document.getElementById('group-name').value;
    var groupDescription = document.getElementById('group-description').value;
    var newGroup =  
    {
      "TeamURL": groupName.toLowerCase().replace(/ /g,"_");
      "TeamName": groupName,
      "TeamDescription": groupDescription,
      "Members": [
      {"membername": UserName}
      ],
      "Posts": []
    };
  } 
  </script>

  <script>
      function addPost(UserName){
          var cardDiv = document.createElement('div');
          cardDiv.className = 'card';
          var title = document.createElement('h5');
          var name = document.createTextNode(UserName);
          title.appendChild(name);
          var post = document.createElement('p');
          var postText = document.getElementById('post-text').value;
          post.append(postText);
         
          cardDiv.appendChild(title);
          cardDiv.append(post);
          var welcome = $("#card-stack");
          welcome.prepend(cardDiv);
}

  </script>

  <script>
    document.getElementById("date").innerHTML = Date();
  </script>

  <script src="/assets/js/post.js"></script>

</body>

</html>
